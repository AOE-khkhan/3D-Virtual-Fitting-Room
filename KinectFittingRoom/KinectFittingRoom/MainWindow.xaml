<Window x:Class="KinectFittingRoom.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:KinectFittingRoom.Converters"
        xmlns:buttons="clr-namespace:KinectFittingRoom.View.Buttons"
        xmlns:helpers="clr-namespace:KinectFittingRoom.View.Helpers"
        WindowState="Maximized"		
		WindowStyle="None"
        Title="Kinect Fitting Room"
        Height="768" Width="1366"
        DataContext="{Binding KinectViewModel, Source={StaticResource KinectViewModelLoader}}">
    <Window.Resources>
        <converters:ReducedValueConverter x:Key="ReducedValueConverter"/>
    </Window.Resources>
    <Grid Background="Black">
        <Image Source="{Binding KinectService.KinectCameraImage}"
			   helpers:PropertiesObserver.Observe="True"
			   helpers:PropertiesObserver.ObservedWidth="{Binding KinectService.Width, Mode=OneWayToSource}"
			   helpers:PropertiesObserver.ObservedHeight="{Binding KinectService.Height, Mode=OneWayToSource}"/>
        <Canvas>
            <Canvas Name="LeftPanel"
                    Width="250" 
                    Height="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Canvas}}
                    , Path=ActualHeight, Converter={StaticResource ReducedValueConverter}, ConverterParameter=40}" 
                    Background="GhostWhite" 
                    Opacity="0.5" 
                    Margin="220, 20"/>
            <StackPanel Width="{Binding ActualWidth, ElementName=LeftPanel}"
                        Height="{Binding ActualHeight, ElementName=LeftPanel}" 
                        Canvas.Left="{Binding (Canvas.Left), ElementName=LeftPanel}" 
                        Canvas.Top="{Binding (Canvas.Top), ElementName=LeftPanel}" 
                        Margin="{Binding Margin, ElementName=LeftPanel}">
                <ContentControl Content="{Binding ElementName=ClothingCategories, Path=SelectedItem}" DataContext="{Binding ClothingCategories}">
                    <ContentControl.Resources>
                        <DataTemplate DataType="{x:Type buttons:TimerButton}">
                            <buttons:TimerButton Style="{DynamicResource GlassButton}" Width="200" Height="200">
                                <Canvas>
                                    <Image Source="{Binding Image}" DataContext=""/>
                                </Canvas>
                            </buttons:TimerButton>
                        </DataTemplate>
                    </ContentControl.Resources>
                </ContentControl>
                <!--<buttons:TimerButton x:Name="ButtonHat" Style="{DynamicResource GlassButton}" Width="200" Height="200">
                    <Canvas Width="{Binding ActualWidth, ElementName=ButtonHat}" Height="{Binding ActualHeight, ElementName=ButtonHat}">
                        <Image Source="/Resources/Images/Hat.png" Width="{Binding ActualWidth, ElementName=ButtonHat}" Height="{Binding ActualHeight, ElementName=ButtonHat}"/>
                    </Canvas>
                </buttons:TimerButton>
                <buttons:TimerButton x:Name="ButtonHat1" Style="{DynamicResource GlassButton}" Width="200" Height="200">
                    <Canvas Width="{Binding ActualWidth, ElementName=ButtonHat}" Height="{Binding ActualHeight, ElementName=ButtonHat}">
                        <Image Source="/Resources/Images/Hat.png" Width="{Binding ActualWidth, ElementName=ButtonHat}" Height="{Binding ActualHeight, ElementName=ButtonHat}"/>
                    </Canvas>
                </buttons:TimerButton>-->
            </StackPanel>
            <Canvas Width="250" Height="{Binding CameraImageHeight}" Background="GhostWhite" Opacity="0.5" Canvas.Right="20" Margin="20,20,20,20"/>
        </Canvas>
        <!--<ItemsControl ItemsSource="{Binding Clothing}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas Width="{Binding ActualWidth, ElementName=KinectCameraImage}" Height="{Binding ActualHeight, ElementName=KinectCameraImage}"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemContainerStyle>
                <Style>
                    <Setter Property="Canvas.Top" Value="{Binding Path=Y}" />
                    <Setter Property="Canvas.Left" Value="{Binding Path=X}" />
                </Style>
            </ItemsControl.ItemContainerStyle>
        </ItemsControl>-->
        <!--canvas containing hand cursor-->
        <Canvas Width="{Binding KinectService.Width}" Height="{Binding KinectService.Height}">
            <Canvas Width="70" Height="70" Visibility="{Binding KinectService.Hand.Visibility}">
                <Ellipse Width="{Binding RelativeSource={RelativeSource AncestorType=Canvas}, Path=ActualWidth}" 
                         Height="{Binding RelativeSource={RelativeSource AncestorType=Canvas}, Path=ActualHeight}" 
                         Fill="GhostWhite"
                         Opacity="0.5" 
                         Stroke="Black" 
                         StrokeThickness="2"/>
                <Image Source="/Resources/Images/Hand.png" Width="60" Height="60" Margin="5,5,5,5">
                    <!--<Image.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform x:Name="CursorScale" ScaleX="-1" />
                        </TransformGroup>
                    </Image.RenderTransform>-->
                </Image>
				<Canvas.Style>
					<Style>
						<Setter Property="Canvas.Top" Value="{Binding KinectService.Hand.Position.Y}" />
						<Setter Property="Canvas.Left" Value="{Binding KinectService.Hand.Position.X}" />
					</Style>
				</Canvas.Style>
            </Canvas>
        </Canvas>
        <!--Grid containing Skeleton parts for debugging-->
        <ItemsControl ItemsSource="{Binding KinectService.SkeletonManager.SkeletonParts}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Grid Width="{Binding KinectService.Width}" Height="{Binding KinectService.Height}"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
		<Canvas>
			<Ellipse Width="10" Height="10" Canvas.Left="100" Canvas.Top="100" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="100" Canvas.Top="200" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="100" Canvas.Top="300" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="100" Canvas.Top="400" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="100" Canvas.Top="500" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="200" Canvas.Top="100" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="200" Canvas.Top="200" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="200" Canvas.Top="300" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="200" Canvas.Top="400" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="200" Canvas.Top="500" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="300" Canvas.Top="100" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="300" Canvas.Top="200" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="300" Canvas.Top="300" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="300" Canvas.Top="400" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="300" Canvas.Top="500" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="400" Canvas.Top="100" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="400" Canvas.Top="200" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="400" Canvas.Top="300" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="400" Canvas.Top="400" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="400" Canvas.Top="500" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="500" Canvas.Top="100" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="500" Canvas.Top="200" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="500" Canvas.Top="300" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="500" Canvas.Top="400" Fill="Red"/>
			<Ellipse Width="10" Height="10" Canvas.Left="500" Canvas.Top="500" Fill="Red"/>
		</Canvas>
        <Label x:Name="TimerLabel" FontSize="30" x:FieldModifier="public" Width="100" Height="100" Margin="0,0,417,220"/>
    </Grid>
</Window>
